name: Notify Feishu on Push

on:
  push:
    branches:
      - main   # ä½ è¦ç›‘æ§çš„åˆ†æ”¯ï¼Œå¯æ”¹æˆ master æˆ–æ‰€æœ‰åˆ†æ”¯

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Feishu Notification
        run: |
          MESSAGE="ğŸ”” ä»“åº“æ›´æ–°ï¼š${{ github.repository }}%0A\
ğŸ‘¤ æäº¤è€…ï¼š${{ github.actor }}%0A\
ğŸ“„ åˆ†æ”¯ï¼š${{ github.ref_name }}%0A\
ğŸ“ æäº¤ä¿¡æ¯ï¼š${{ github.event.head_commit.message }}"

          curl -X POST \
            -H "Content-Type: application/json" \
            -d "{
              \"msg_type\": \"text\",
              \"content\": {
                \"text\": \"$MESSAGE\"
              }
            }" \
            ${{ secrets.FEISHU_WEBHOOK }}
